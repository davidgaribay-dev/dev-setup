# Plane Configuration
# Managed by Ansible - DO NOT EDIT MANUALLY

APP_DOMAIN={{ core_services_ip }}
APP_RELEASE={{ plane_app_release }}

WEB_REPLICAS=1
SPACE_REPLICAS=1
ADMIN_REPLICAS=1
API_REPLICAS=1
WORKER_REPLICAS=1
BEAT_WORKER_REPLICAS=1
LIVE_REPLICAS=1

# Plane's proxy ports - internal only, Caddy handles external SSL
LISTEN_HTTP_PORT=80
LISTEN_HTTPS_PORT=443

WEB_URL=https://{{ core_services_ip }}
DEBUG=0
CORS_ALLOWED_ORIGINS=https://{{ core_services_ip }}
API_BASE_URL=http://api:8000

# Database Settings
PGHOST=plane-db
PGDATABASE=plane
POSTGRES_USER=plane
POSTGRES_PASSWORD={{ plane_postgres_password }}
POSTGRES_DB=plane
POSTGRES_PORT=5432
PGDATA=/var/lib/postgresql/data
DATABASE_URL=postgresql://plane:{{ plane_postgres_password }}@plane-db/plane

# Redis Settings
REDIS_HOST=plane-redis
REDIS_PORT=6379
REDIS_URL=redis://plane-redis:6379/

# RabbitMQ Settings
RABBITMQ_HOST=plane-mq
RABBITMQ_PORT=5672
RABBITMQ_USER=plane
RABBITMQ_PASSWORD={{ plane_rabbitmq_password }}
RABBITMQ_VHOST=plane
AMQP_URL=amqp://plane:{{ plane_rabbitmq_password }}@plane-mq:5672/plane

# SSL - use internal self-signed certs (Caddy handles external SSL)
# Only trust proxies from internal networks
TRUSTED_PROXIES={{ core_services_allowed_subnets | join(',') }}
SITE_ADDRESS=:80

# Secret Key
SECRET_KEY={{ plane_secret_key }}

# Data Store Settings (MinIO)
USE_MINIO=1
AWS_REGION=
AWS_ACCESS_KEY_ID={{ plane_minio_access_key }}
AWS_SECRET_ACCESS_KEY={{ plane_minio_secret_key }}
AWS_S3_ENDPOINT_URL=http://plane-minio:9000
AWS_S3_BUCKET_NAME=uploads
FILE_SIZE_LIMIT=5242880

# Gunicorn Workers
GUNICORN_WORKERS=1

# Force HTTPS for handling SSL Termination
MINIO_ENDPOINT_SSL=0

# API key rate limit
API_KEY_RATE_LIMIT=60/minute

# Live server environment variables
LIVE_SERVER_SECRET_KEY={{ plane_live_secret_key }}
DOCKERHUB_USER=artifacts.plane.so/makeplane
PULL_POLICY=if_not_present
CUSTOM_BUILD=false
